{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { FormGroup, FormControl, Validators } from \"@angular/forms\";\nimport { Subject, throwError } from 'rxjs';\nimport { map, debounceTime, distinctUntilChanged, switchMap, catchError } from \"rxjs/operators\";\nlet SearchComponent = class SearchComponent {\n  constructor(searchService) {\n    this.searchService = searchService;\n    this.searchTerm = new Subject();\n    this.baseUrl = \"https://api.github.com/search/repositories\";\n    this.searchForm = new FormGroup({\n      search: new FormControl('', Validators.required)\n    });\n  }\n\n  search() {\n    this.searchTerm.pipe(map(e => {\n      console.log(e.target.value);\n      return e.target.value;\n    }), debounceTime(400), distinctUntilChanged(), switchMap(term => {\n      this.loading = true;\n      return this.searchService.searchCharacters(term);\n    }), catchError(e => {\n      //handle the error and return it\n      console.log(e);\n      this.loading = false;\n      this.errorMessage = e.message;\n      return throwError(e);\n    })).subscribe(v => {\n      this.loading = false; //return the results and pass the to the paginate module\n\n      this.searchResults = v;\n      this.paginationElements = this.searchResults;\n    });\n  }\n\n  ngOnInit() {\n    this.search();\n  }\n\n  toogleFav(id) {\n    console.log(id);\n    var index = this.favs.indexOf(id);\n\n    if (index == -1) {\n      this.favs.push(id);\n    } else {\n      do {\n        this.favs.splice(index, 1);\n        index = this.favs.indexOf(id);\n      } while (index != -1);\n    }\n\n    localStorage.setItem('favorites', JSON.stringify(this.favs));\n  }\n\n  isMyFav(id) {\n    console.log(id);\n    var favs = JSON.parse(localStorage.getItem('favorites'));\n    var index = favs.indexOf(id);\n\n    if (index > -1) {\n      return true;\n    }\n\n    return false;\n  }\n\n};\nSearchComponent = __decorate([Component({\n  selector: 'app-search',\n  templateUrl: './search.component.html',\n  styleUrls: ['./search.component.css']\n})], SearchComponent);\nexport { SearchComponent };","map":null,"metadata":{},"sourceType":"module"}